webpackJsonp([33],{"/zKT":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("nznj"),l=a("qngx"),i={name:"case",data:()=>({caseTitle:"",tableData:[],modelVisible:!1,form:{},importForm:{},file:{},importModelVisible:!1,qys:[],ajlxs:[],ajzts:[],pcs:[],pageSize:15,currentPage:1,total:0,baseCaseJson:l.a,searchInput:{},selectedDates:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}),created(){this.getDictData(),this.getData()},methods:{getData(){this.$axios.post("casebase/findAllByCondition",{page:this.currentPage,pagesize:this.pageSize}).then(e=>{200==e.resCode&&(this.tableData=e.data,this.total=e.counts)})},getDictData(){this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJQYDM",zxbz:0}).then(e=>{200==e.resCode?this.qys=e.data:100==e.resCode&&this.$router.push("/login")}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJLXDM",zxbz:0}).then(e=>{200==e.resCode?this.ajlxs=e.data:100==e.resCode&&this.$router.push("/login")}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJZTDM",zxbz:0}).then(e=>{200==e.resCode?this.ajzts=e.data:100==e.resCode&&this.$router.push("/login")}),this.$axios.post("/batch/findAll",{page:1,pagesize:1e3}).then(e=>{200==e.resCode&&(this.pcs=e.data)})},clearCondition(){this.selectedDates=[],this.searchInput={},this.getData()},searchByCondition(){this.currentPage=1,this.$axios.post("/casebase/findAllByCondition",Object.assign({},{page:this.currentPage,pagesize:this.pageSize,begin:this.selectedDates[0],end:this.selectedDates[1]},this.searchInput)).then(e=>{200==e.resCode&&(this.tableData=e.data,this.total=e.counts)})},handleCaseInfo(e,t){this.$router.push({name:"caseInfo",params:t}),this.$axios.get("/casebase/findAllInfoById?id="+t.id).then(e=>{200==e.resCode&&(this.form=Object.assign({},e.data),this.modelVisible=!0,this.caseTitle="案件: "+e.data.ajmc)})},AjlxFormatter(e){return s.a.dictParse(e.ajlx,this.ajlxs)},AjztFormatter(e){return s.a.dictParse(e.ajzt,this.ajzts)},AjqyFormatter(e){return s.a.dictParse(e.ajqy,this.qys)},saveImport(){let e=new FormData;e.append("pcid",this.importForm.pcid),e.append("ajqy",this.importForm.ajqy),e.append("ajlx",this.importForm.ajlx),e.append("file",this.file);this.$axios.post("/batch/importExcel",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{200==e.resCode&&(this.$message.success("案件导入成功!"),this.importModelVisible=!1)})},handlerUpload(e){this.file=e.target.files[0]},importCase(){this.importModelVisible=!0,this.importForm={}},closeClear(){this.$refs.importForm.resetFields(),this.$refs.detailForm.resetFields()},search(){this.is_search=!0},add(){this.form={},this.modelVisible=!0},handleOrder(e,t){this.$router.push({name:"caseInfo",params:t})},handleDelete(e,t){this.$confirm("此操作将注销本案件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.post("/user/delete",this.$qs.stringify({uuid:t.uuid})).then(e=>{this.getData(),this.$message.success("已删除！")})}).catch(()=>{})},handleSelectionChange(e){this.multipleSelection=e},saveEdit(){let e="/user/add";this.form.uuid&&(e="/user/update"),this.$axios.post(e,this.$qs.stringify(Object.assign({},this.form))).then(e=>{this.$message.success(e.resMsg),this.modelVisible=!1,this.getData()})},deleteRow(){this.tableData.splice(this.idx,1),this.$message.success("删除成功"),this.delVisible=!1},handleSizeChange(e){this.pageSize=e,this.getData()},handleCurrentChange(e){this.currentPage=e,this.getData()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchInput,size:"mini","label-width":"90px"}},[a("el-form-item",{attrs:{label:"模板批次"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchInput.pcid,callback:function(t){e.$set(e.searchInput,"pcid",t)},expression:"searchInput.pcid"}},e._l(e.pcs,function(e){return a("el-option",{key:e.id,attrs:{label:e.pcmc,value:e.pcid}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"案件名称"}},[a("el-input",{attrs:{placeholder:"输入案件名称",clearable:""},model:{value:e.searchInput.ajmc,callback:function(t){e.$set(e.searchInput,"ajmc",t)},expression:"searchInput.ajmc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"案件类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchInput.ajlx,callback:function(t){e.$set(e.searchInput,"ajlx",t)},expression:"searchInput.ajlx"}},e._l(e.ajlxs,function(e){return a("el-option",{key:e.ctdm,attrs:{label:e.ctmc,value:e.ctdm}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"案件状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchInput.ajzt,callback:function(t){e.$set(e.searchInput,"ajzt",t)},expression:"searchInput.ajzt"}},e._l(e.ajzts,function(e){return a("el-option",{key:e.ctdm,attrs:{label:e.ctmc,value:e.ctdm}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"案件区域"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchInput.ajqy,callback:function(t){e.$set(e.searchInput,"ajqy",t)},expression:"searchInput.ajqy"}},e._l(e.qys,function(e){return a("el-option",{key:e.ctdm,attrs:{label:e.ctmc,value:e.ctdm}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"查询时间段"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions2},model:{value:e.selectedDates,callback:function(t){e.selectedDates=t},expression:"selectedDates"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.clearCondition}},[e._v("清空条件")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.searchByCondition}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:e.importCase}},[e._v("导入案件")])],1)],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"ajmc",label:"案件名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ajlx",label:"案件类型",formatter:e.AjlxFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"ajzt",label:"案件状态",formatter:e.AjztFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"ajqy",label:"案件区域",formatter:e.AjqyFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"ajyj",label:"案件佣金"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pcid",label:"模板批次ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gaxlh",label:"个案序列号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pch",label:"批次号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"drsj",label:"导入时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleCaseInfo(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-lx-edit"}),e._v("\n                        案件详情\n                    ")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":[15,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"导入案件",visible:e.importModelVisible,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.importModelVisible=t},closed:e.closeClear}},[a("el-form",{ref:"importForm",staticClass:"clearfix",attrs:{model:e.importForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择批次"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.importForm.pcid,callback:function(t){e.$set(e.importForm,"pcid",t)},expression:"importForm.pcid"}},e._l(e.pcs,function(e){return a("el-option",{key:e.id,attrs:{label:e.pcmc,value:e.pcid}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"案件区域"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.importForm.ajqy,callback:function(t){e.$set(e.importForm,"ajqy",t)},expression:"importForm.ajqy"}},e._l(e.qys,function(e){return a("el-option",{key:e.ctdm,attrs:{label:e.ctmc,value:e.ctdm}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"案件类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.importForm.ajlx,callback:function(t){e.$set(e.importForm,"ajlx",t)},expression:"importForm.ajlx"}},e._l(e.ajlxs,function(e){return a("el-option",{key:e.ctdm,attrs:{label:e.ctmc,value:e.ctdm}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"文件"}},[a("input",{staticClass:"inputfile",attrs:{type:"file",id:"myFile"},on:{change:e.handlerUpload}})])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importModelVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveImport}},[e._v("导 入")])],1)],1)],1)},staticRenderFns:[]},o=a("C7Lr")(i,r,!1,null,null,null);t.default=o.exports}});