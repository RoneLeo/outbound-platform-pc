webpackJsonp([31],{IBaa:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={name:"basetable",data:()=>({loading:!1,dictId:"",dictName:"",dictItemForm:{},tabArr:[],tableLoading:!1,tableData:[],modelVisible:!1,modelTitle:"",delVisible:!1,cancelBtnTxt:"注销"}),created(){this.getDictData()},methods:{tabClick(){this.getDictItem()},getDictData(){this.loading=!0,this.$axios.post("dict/findDicts").then(t=>{this.loading=!1;let e=t.data;this.dictName=e[0].zdmc,this.dictId=String(e[0].id),this.tabArr=e,this.getDictItem(),0==e.length&&this.$msgbox({type:"warning",title:"温馨提示",message:"暂无字典数据,请到字典管理中添加数据字典",showCancelButton:!1,confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消"}).then(()=>{$.router.push("/dict")}).catch(()=>{$.router.push("/dict")})})},getDictItem(){this.tableLoading=!0,this.$axios.post("dict/findDictList",{zdid:this.dictId}).then(t=>{this.tableData=t.data,this.tableLoading=!1})},handleAdd(){this.dictItemForm={},this.modelTitle=this.dictName+" - 新增词条",this.modelVisible=!0},handleEdit(t,e){this.dictItemForm=Object.assign({},e),this.modelTitle=this.dictName+" - 编辑词条",this.modelVisible=!0},saveData(){let t="dict/addDictList";this.dictItemForm.id&&(t="dict/updateDictList"),this.dictItemForm.zdid=this.dictId,this.$axios.post(t,this.dictItemForm).then(t=>{this.modelVisible=!1,this.getDictItem()})},handleDelete(t,e){let i="dict/cancellationDicListById",l="注销";1==e.zxbz&&(i="dict/activationDicListById",l="激活"),this.$confirm("此操作将"+l+"字典项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.post(i,{id:e.id}).then(t=>{this.getDictData(),this.$message.success("已"+l+"！")})}).catch(()=>{})},closeClear(){this.$refs.form.resetFields()},handleCurrentChange(t){this.getData()},search(){},add(){this.form={mm:"123456"},this.modelVisible=!0},formatter:(t,e)=>t.address,filterTag:(t,e)=>e.tag===t,resetMM(t,e){this.$axios.post("/user/resetMm",this.$qs.stringify({id:e.uuid})).then(t=>{this.$message.success("已将密码重置为123456，请告知用户尽快修改密码！"),this.getData()})},handleSelectionChange(t){}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"数据加载中..."}},[i("div",{staticClass:"container"},[i("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.dictId,callback:function(e){t.dictId=e},expression:"dictId"}},[t._l(t.tabArr,function(t,e){return i("el-tab-pane",{key:e,attrs:{label:t.zdmc,name:t.id+""}})}),t._v(" "),i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.handleAdd}},[t._v("添加字典词条")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",staticClass:"table",attrs:{border:"",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{prop:"ctmc",label:"字典词条名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"ctdm",label:"字典词条代码"}}),t._v(" "),i("el-table-column",{attrs:{prop:"zxbz",label:"是否注销"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(1==e.row.zxbz?"是":"否")+"\n                    ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("\n                                "+t._s(1==e.row.zxbz?"激活":"注销")+"\n                        ")])]}}])})],1)],2)],1),t._v(" "),i("el-dialog",{attrs:{title:t.modelTitle,visible:t.modelVisible,width:"35%","close-on-click-modal":!1},on:{"update:visible":function(e){t.modelVisible=e},closed:t.closeClear}},[i("el-form",{ref:"form",attrs:{model:t.dictItemForm,"label-width":"100px"}},[t.dictItemForm.id?i("el-form-item",{attrs:{label:"词条代码"}},[i("el-input",{attrs:{readonly:""},model:{value:t.dictItemForm.ctdm,callback:function(e){t.$set(t.dictItemForm,"ctdm",e)},expression:"dictItemForm.ctdm"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"词条名称",prop:"ctmc",rules:[{required:!0,message:"词条名称不能为空",trigger:"blur"}]}},[i("el-input",{model:{value:t.dictItemForm.ctmc,callback:function(e){t.$set(t.dictItemForm,"ctmc",e)},expression:"dictItemForm.ctmc"}})],1),t._v(" "),t.dictItemForm.id?i("el-form-item",{attrs:{label:"是否启用"}},[i("el-select",{model:{value:t.dictItemForm.zxbz,callback:function(e){t.$set(t.dictItemForm,"zxbz",e)},expression:"dictItemForm.zxbz"}},[i("el-option",{attrs:{label:"启用",value:"0"}}),t._v(" "),i("el-option",{attrs:{label:"注销",value:"1"}})],1)],1):t._e()],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.modelVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveData}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[i("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]},s=i("C7Lr")(l,a,!1,null,null,null);e.default=s.exports}});