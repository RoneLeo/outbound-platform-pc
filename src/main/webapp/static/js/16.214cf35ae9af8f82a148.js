webpackJsonp([16],{"0vCq":function(t,e){},kILS:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("nznj"),i=s("qngx"),l={name:"caseInfo",data:()=>({caseForm:{},caseTitle:"",taskTitle:"任务一的记录信息",recordModelVisible:!1,assignedModelVisible:!1,tableData:[],modelVisible:!1,form:{},importForm:{},file:{},importModelVisible:!1,qys:[],ajlxs:[],ajzts:[],pcs:[],pageSize:15,currentPage:1,total:0,baseCaseJson:i.a,searchInput:{},selectedDates:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick(t){const e=new Date,s=new Date;s.setTime(s.getTime()-6048e5),t.$emit("pick",[s,e])}},{text:"最近一个月",onClick(t){const e=new Date,s=new Date;s.setTime(s.getTime()-2592e6),t.$emit("pick",[s,e])}},{text:"最近三个月",onClick(t){const e=new Date,s=new Date;s.setTime(s.getTime()-7776e6),t.$emit("pick",[s,e])}}]}}),created(){this.getCaseInfo(),this.getDictData(),this.getTaskData()},methods:{getCaseInfo(){let t=this.$route.params;this.caseTitle=t.ajmc,t.id?this.$axios.get("/casebase/findAllInfoById?id="+t.id).then(t=>{this.caseForm=Object.assign({},t.data)}):this.$router.push({name:"cases"})},getTaskData(){this.$axios.post("task/findAllByCondition",{page:this.currentPage,pagesize:this.pageSize}).then(t=>{this.tableData=t.data,this.total=t.counts})},getDictData(){this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJQYDM",zxbz:0}).then(t=>{200==t.resCode?this.qys=t.data:100==t.resCode&&this.$router.push("/login")}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJLXDM",zxbz:0}).then(t=>{200==t.resCode?this.ajlxs=t.data:100==t.resCode&&this.$router.push("/login")}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJZTDM",zxbz:0}).then(t=>{200==t.resCode?this.ajzts=t.data:100==t.resCode&&this.$router.push("/login")}),this.$axios.post("/batch/findAll",{page:1,pagesize:1e3}).then(t=>{200==t.resCode&&(this.pcs=t.data)})},backToCaseList(){this.$router.push({name:"cases"})},clearCondition(){this.selectedDates=[],this.searchInput={},this.getData()},searchByCondition(){this.currentPage=1,this.$axios.post("/casebase/findAllByCondition",Object.assign({},{page:this.currentPage,pagesize:this.pageSize,begin:this.selectedDates[0],end:this.selectedDates[1]},this.searchInput)).then(t=>{200==t.resCode&&(this.tableData=t.data,this.total=t.counts)})},handleTask(t,e){this.assignedModelVisible=!0},handleTaskRecord(t,e){console.log(e);let s=e.id;this.$axios.post("feedback/findAllByRwid",{rwid:s,page:1,pagesize:1e4}).then(t=>{console.log("任务记录:",t),this.recordModelVisible=!0})},AjlxFormatter(t){return a.a.dictParse(t.ajlx,this.ajlxs)},AjztFormatter(t){return a.a.dictParse(t.ajzt,this.ajzts)},AjqyFormatter(t){return a.a.dictParse(t.ajqy,this.qys)},saveImport(){let t=new FormData;t.append("pcid",this.importForm.pcid),t.append("ajqy",this.importForm.ajqy),t.append("ajlx",this.importForm.ajlx),t.append("file",this.file);this.$axios.post("/batch/importExcel",t,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{200==t.resCode&&(this.$message.success("案件导入成功!"),this.importModelVisible=!1)})},handlerUpload(t){this.file=t.target.files[0]},importCase(){this.importModelVisible=!0,this.importForm={}},closeClear(){this.$refs.importForm.resetFields(),this.$refs.detailForm.resetFields()},search(){this.is_search=!0},add(){this.form={},this.modelVisible=!0},handleOrder(t,e){this.$router.push({name:"order",params:e})},handleDelete(t,e){this.$confirm("此操作将注销本案件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.post("/user/delete",this.$qs.stringify({uuid:e.uuid})).then(t=>{this.getData(),this.$message.success("已删除！")})}).catch(()=>{})},handleSelectionChange(t){this.multipleSelection=t},saveEdit(){let t="/user/add";this.caseForm.uuid&&(t="/user/update"),this.$axios.post(t,this.$qs.stringify(Object.assign({},this.form))).then(t=>{this.$message.success(t.resMsg),this.modelVisible=!1,this.getData()})},deleteRow(){this.tableData.splice(this.idx,1),this.$message.success("删除成功"),this.delVisible=!1},handleSizeChange(t){this.pageSize=t,this.getData()},handleCurrentChange(t){this.currentPage=t,this.getData()}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[s("h3",[t._v(t._s(t.caseTitle)+" ")])]),t._v(" "),s("div",{staticClass:"case-info"},[s("el-button",{staticClass:"return-btn",attrs:{type:"success"},on:{click:t.backToCaseList}},[t._v("返回案件列表")]),t._v(" "),s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"案件基本信息"}},[s("div",{attrs:{id:"caseInfo"}},[s("el-form",{ref:"detailForm",staticClass:"case-detail-form",attrs:{model:t.form,"label-width":"120px","label-position":"right"}},[s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("基本信息")]),t._v(" "),s("el-form-item",{attrs:{label:t.baseCaseJson.ajmc}},[t._v("\n                                "+t._s(t.caseForm.ajmc)+"\n                            ")]),t._v(" "),s("el-form-item",{attrs:{label:t.baseCaseJson.gaxlh}},[t._v("\n                                "+t._s(t.caseForm.gaxlh)+"\n                            ")]),t._v(" "),s("el-form-item",{attrs:{label:t.baseCaseJson.pcid}},[t._v("\n                                "+t._s(t.caseForm.pcid)+"\n                            ")]),t._v(" "),s("el-form-item",{attrs:{label:t.baseCaseJson.ajyj}},[t._v("\n                                "+t._s(t.caseForm.ajyj)+"\n                            ")])],1),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("卡号信息")]),t._v(" "),t._l(t.caseForm.khxx,function(e,a){return[t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("催收员信息")]),t._v(" "),t._l(t.caseForm.csyxx,function(e,a){return[t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("贷款信息")]),t._v(" "),t._l(t.caseForm.dkxx,function(e,a){return[t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("对象信息")]),t._v(" "),t._l(t.caseForm.dxxx,function(e,a){return[t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+t._s(e)+t._s(e)+t._s(e)+t._s(e)+t._s(e)+t._s(e)+t._s(e)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("外访信息")]),t._v(" "),t._l(t.caseForm.wfxx,function(e,a){return[t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&"null"!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("案人信息")]),t._v(" "),t._l(t.caseForm.arxx,function(e,a){return[t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("联系人信息")]),t._v(" "),t._l(t.caseForm.lxrxx,function(e,a){return[s("div",{staticClass:"line"}),t._v(" "),t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("其他信息")]),t._v(" "),t._l(t.caseForm.qtxx,function(e,a){return[t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),s("div",{staticClass:"case-item clearfix"},[s("div",{staticClass:"case-title"},[t._v("备注信息")]),t._v(" "),t._l(t.caseForm.bzxx,function(e,a){return[s("div",{staticClass:"line"}),t._v(" "),t._l(e,function(e,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=e?s("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(e)+"\n                                    ")]):t._e()]})]})],2)])],1)]),t._v(" "),s("el-tab-pane",{attrs:{label:"案件任务信息"}},[s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData}},[s("el-table-column",{attrs:{prop:"rwmc",label:"任务名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"rwzt",label:"任务状态"}}),t._v(" "),s("el-table-column",{attrs:{prop:"rwfs",label:"任务方式"}}),t._v(" "),s("el-table-column",{attrs:{prop:"rwzxr",label:"任务执行人"}}),t._v(" "),s("el-table-column",{attrs:{prop:"rwyj",label:"任务佣金"}}),t._v(" "),s("el-table-column",{attrs:{prop:"sjyj",label:"实际佣金"}}),t._v(" "),s("el-table-column",{attrs:{prop:"rwjzsj",label:"任务截止时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"rwwcsj",label:"任务完成时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"shbz",label:"审核备注"}}),t._v(" "),s("el-table-column",{attrs:{prop:"rwms",label:"任务描述"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(s){return t.handleTask(e.$index,e.row)}}},[t._v("\n                                指派\n                            ")]),t._v(" "),s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){return t.handleTaskRecord(e.$index,e.row)}}},[t._v("\n                                记录\n                            ")])]}}])})],1),t._v(" "),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{"current-page":t.currentPage,background:"","page-sizes":[15,20,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:t.taskTitle,visible:t.recordModelVisible,width:"50%"},on:{"update:visible":function(e){t.recordModelVisible=e}}},[s("div",[s("el-steps",{attrs:{active:1}},[s("el-step",{attrs:{title:"记录1",description:"任务记录详细信息"}}),t._v(" "),s("el-step",{attrs:{title:"记录2",description:"任务记录详细信息"}}),t._v(" "),s("el-step",{attrs:{title:"记录3",description:"任务记录详细信息"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.recordModelVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:"指派任务",visible:t.assignedModelVisible,width:"50%"},on:{"update:visible":function(e){t.assignedModelVisible=e}}},[s("div",[s("h3",[t._v("请选择任务接收人")]),t._v(" "),s("div")]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.assignedModelVisible=!1}}},[t._v("关 闭")])],1)])],1)},staticRenderFns:[]};var n=s("C7Lr")(l,r,!1,function(t){s("0vCq")},null,null);e.default=n.exports}});