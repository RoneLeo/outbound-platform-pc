webpackJsonp([23],{"8VJ1":function(e,t){},zR98:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("nznj"),r={name:"basetable",data:()=>({formStatus:"add",userType:"0",userData:[],addFormVisible:!1,addForm:{},currentPage:1,pageSize:15,total:0,roles:[],caseArea:[]}),created(){this.getData(),this.getDictData()},methods:{getDictData(){this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJQYDM",zxbz:0}).then(e=>{this.caseArea=e.data}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_RYJSDM",zxbz:0}).then(e=>{this.roles=e.data})},changeType(){this.getData()},saveData(){this.$refs.addForm.validate(e=>{if(!e)return!1;{let e="/user/add";this.addForm.id&&(e="/user/update"),this.$axios.post(e,Object.assign({},this.addForm)).then(e=>{this.addFormVisible=!1,this.getData()})}})},roleFormatter(e){return l.a.dictParse(e.js,this.roles)},orgFormatter(e){return l.a.dictParse(e.szxzqdm,this.caseArea)},getData(){this.$axios.post("/user/findAll",{zt:this.userType,page:this.currentPage,pagesize:this.pageSize}).then(e=>{200==e.resCode?(this.userData=e.data,this.total=e.counts):100==e.resCode&&this.$router.push("/login")})},handleAdd:function(){this.formStatus="add",this.addFormVisible=!0,this.addForm={}},handleEdit:function(e,t){this.formStatus="edit",this.addForm=Object.assign({},t),this.addFormVisible=!0},handleDel:function(e,t){this.$confirm("此操作将永久删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.post("/user/delete",{id:t.id}).then(e=>{200==e.resCode&&(this.getData(),this.$message({type:"success",message:"删除成功!"}))})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleCancel(e,t){let a="注销",l=1;1==t.zt&&(a="激活",l=0),this.$confirm("此操作将"+a+"该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$axios.post("/user/cancelAccount",{id:t.id,zt:l}).then(e=>{200==e.resCode&&(this.getData(),this.$message({type:"success",message:a+"成功!"}))})}).catch(()=>{})},handleSizeChange(e){this.pageSize=e,this.getData()},handleCurrentChange(e){this.currentPage=e,this.getData()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.handleAdd}},[e._v("添加用户")]),e._v(" "),a("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeType},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("已激活")]),e._v(" "),a("el-radio-button",{attrs:{label:"1"}},[e._v("已注销")]),e._v(" "),a("el-radio-button",{attrs:{label:""}},[e._v("全部")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("el-table",{attrs:{data:e.userData}},[a("el-table-column",{attrs:{prop:"yhm",label:"账号","show-overflow-tooltip":!1,fixed:"",sortable:!1,align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mz",label:"姓名","show-overflow-tooltip":!1,fixed:"",sortable:!1,align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"szxzqdm",label:"区域","show-overflow-tooltip":!1,width:"",sortable:!1,align:"left",formatter:e.orgFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"js",label:"角色","show-overflow-tooltip":!1,width:"",sortable:!1,align:"left",formatter:e.roleFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"lxdh",label:"联系电话","show-overflow-tooltip":!1,sortable:!1,align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cjsj",label:"创建时间","show-overflow-tooltip":!1,sortable:!1,align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sqm",label:"微信授权码"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"left",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.zt?a("span",[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),0==t.row.zt?a("el-button",{staticStyle:{color:"#c2970e"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleCancel(t.$index,t.row)}}},[e._v("注销")]):e._e()],1):a("span",[1==t.row.zt?a("el-button",{staticStyle:{color:"#00ab00"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleCancel(t.$index,t.row)}}},[e._v("激活")]):e._e(),e._v(" "),1==t.row.zt?a("el-button",{staticStyle:{color:"#ff0000"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":[15,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"用户信息",width:"60%",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",staticClass:"userForm",attrs:{model:e.addForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用户姓名",prop:"mz"}},[a("el-input",{attrs:{placeholder:"请输入中文姓名"},model:{value:e.addForm.mz,callback:function(t){e.$set(e.addForm,"mz",t)},expression:"addForm.mz"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户账号",prop:"yhm",rules:[{required:!0,message:"输入不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入英文或数字组合"},model:{value:e.addForm.yhm,callback:function(t){e.$set(e.addForm,"yhm",t)},expression:"addForm.yhm"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属区域",prop:"szxzqdm",rules:[{required:!0,message:"输入不能为空",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.szxzqdm,callback:function(t){e.$set(e.addForm,"szxzqdm",t)},expression:"addForm.szxzqdm"}},e._l(e.caseArea,function(e){return a("el-option",{key:e.ctdm,attrs:{label:e.ctmc,value:e.ctdm+""}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色",prop:"js",rules:[{required:!0,message:"输入不能为空",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.js,callback:function(t){e.$set(e.addForm,"js",t)},expression:"addForm.js"}},e._l(e.roles,function(e){return a("el-option",{key:e.ctdm,attrs:{label:e.ctmc,value:e.ctdm}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"xb"}},[a("el-input",{model:{value:e.addForm.xb,callback:function(t){e.$set(e.addForm,"xb",t)},expression:"addForm.xb"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"nl"}},[a("el-input-number",{model:{value:e.addForm.nl,callback:function(t){e.$set(e.addForm,"nl",t)},expression:"addForm.nl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"lxdh"}},[a("el-input",{model:{value:e.addForm.lxdh,callback:function(t){e.$set(e.addForm,"lxdh",t)},expression:"addForm.lxdh"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"yx"}},[a("el-input",{model:{value:e.addForm.yx,callback:function(t){e.$set(e.addForm,"yx",t)},expression:"addForm.yx"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"住址",prop:"dz"}},[a("el-input",{model:{value:e.addForm.dz,callback:function(t){e.$set(e.addForm,"dz",t)},expression:"addForm.dz"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信授权码",prop:"sqm"}},[a("el-input",{attrs:{readonly:""},model:{value:e.addForm.dz,callback:function(t){e.$set(e.addForm,"dz",t)},expression:"addForm.dz"}})],1)],1),e._v(" "),"add"==e.formStatus?a("el-alert",{attrs:{center:"",title:"用户默认密码: 666666",type:"success",closable:!1}}):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveData}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var s=a("C7Lr")(r,o,!1,function(e){a("8VJ1")},null,null);t.default=s.exports}});