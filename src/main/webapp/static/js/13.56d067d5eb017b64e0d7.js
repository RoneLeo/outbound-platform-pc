webpackJsonp([13],{IPQN:function(t,s){},kILS:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("nznj"),i=e("qngx"),l={name:"caseInfo",data:()=>({taskPersonId:"",ywyArr:[],rwfsArr:[],rwztArr:[],caseInfo:{},caseForm:{},taskForm:{},caseTitle:"",taskTitle:"任务一的记录信息",recordModelVisible:!1,assignedModelVisible:!1,taskModelVisible:!1,ajlxs:[],ajzts:[],ajqys:[],taskId:"",tableData:[],pageSize:15,currentPage:1,total:0,baseCaseJson:i.a}),created(){this.getCaseInfo(),this.getDictData(),this.getTaskData(),this.getPerson()},methods:{getPerson(){this.$axios.get("user/fingByAreacodeAndName").then(t=>{this.ywyArr=t.data})},getCaseInfo(){this.caseInfo=this.$route.params,this.caseInfo.ajqymc=a.a.dictParse(this.caseInfo.ajqy,this.ajqys),this.caseInfo.id?this.$axios.get("/casebase/findAllInfoById?id="+this.caseInfo.id).then(t=>{this.caseForm=Object.assign({},t.data)}):this.$router.push({name:"cases"})},getTaskData(){this.$axios.post("casebase/findAllTaskByAjid",{ajid:this.caseInfo.id,page:this.currentPage,pagesize:this.pageSize}).then(t=>{this.tableData=t.data,this.total=t.counts})},getDictData(){this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJQYDM"}).then(t=>{this.ajqys=t.data,this.caseInfo.ajqymc=a.a.dictParse(this.caseInfo.ajqy,this.ajqys)}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJLXDM"}).then(t=>{this.ajlxs=t.data,this.caseInfo.ajlxmc=a.a.dictParse(this.caseInfo.ajlx,this.ajlxs)}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_AJZTDM"}).then(t=>{this.ajzts=t.data,this.caseInfo.ajztmc=a.a.dictParse(this.caseInfo.ajzt,this.ajzts)}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_RWFSDM"}).then(t=>{this.rwfsArr=t.data}),this.$axios.post("/dict/findDictListByZddm",{zddm:"D_SYS_RWZTDM"}).then(t=>{this.rwztArr=t.data})},backToCaseList(){this.$router.push({name:"cases"})},assignTask(){this.$axios.post("task/appoint",{id:this.taskId,ywyid:this.taskPersonId}).then(t=>{this.assignedModelVisible=!1,this.$message.success("指派成功!"),this.getTaskData()})},handleTask(t,s){this.taskId=s.id,this.assignedModelVisible=!0},handleTaskRecord(t,s){console.log(s);let e=s.id;this.$axios.post("feedback/findAllByRwid",{rwid:e,page:1,pagesize:1e4}).then(t=>{console.log("任务记录:",t),this.recordModelVisible=!0})},handleSizeChange(t){this.pageSize=t,this.getData()},handleCurrentChange(t){this.currentPage=t,this.getData()},saveTask(){let t=this.taskForm;t.ajid=this.caseInfo.id,this.$axios.post("task/add",t).then(t=>{this.taskModelVisible=!1,this.getTaskData()})},rwztFormatter(t){return a.a.dictParse(t.rwzt,this.rwztArr)},rwfsFormatter(t){return a.a.dictParse(t.rwfs,this.rwfsArr)},saveEdit(){},deleteRow(){this.tableData.splice(this.idx,1),this.$message.success("删除成功"),this.delVisible=!1}}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"container"},[e("div",{staticClass:"case-desc clearfix"},[e("div",{staticClass:"left"},[e("span",{staticClass:"pre"},[t._v("案件名称:")]),t._v(" "),e("span",{staticClass:"val"},[t._v(t._s(t.caseInfo.ajmc))]),t._v("，\n            ")]),t._v(" "),e("div",{staticClass:"left"},[e("span",{staticClass:"pre"},[t._v("案件状态:")]),t._v(" "),e("span",{staticClass:"val"},[t._v(t._s(t.caseInfo.ajztmc))]),t._v("，\n            ")]),t._v(" "),e("div",{staticClass:"left"},[e("span",{staticClass:"pre"},[t._v("案件类型:")]),t._v(" "),e("span",{staticClass:"val"},[t._v(t._s(t.caseInfo.ajlxmc))]),t._v("，\n            ")]),t._v(" "),e("div",{staticClass:"left"},[e("span",{staticClass:"pre"},[t._v("案件区域:")]),t._v(" "),e("span",{staticClass:"val"},[t._v(t._s(t.caseInfo.ajqymc))]),t._v("，\n            ")]),t._v(" "),e("div",{staticClass:"left"},[e("span",{staticClass:"pre"},[t._v("总佣金:")]),t._v(" "),e("span",{staticClass:"val"},[t._v(t._s(t.caseInfo.ajyj))])])])]),t._v(" "),e("div",{staticClass:"case-info"},[e("el-button",{staticClass:"return-btn",attrs:{type:"success"},on:{click:t.backToCaseList}},[t._v("返回案件列表")]),t._v(" "),e("el-tabs",{attrs:{type:"border-card"}},[e("el-tab-pane",{attrs:{label:"案件基本信息"}},[e("div",{attrs:{id:"caseInfo"}},[e("el-form",{ref:"caseForm",staticClass:"case-detail-form",attrs:{model:t.caseForm,"label-width":"120px","label-position":"right"}},[e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("基本信息")]),t._v(" "),e("el-form-item",{attrs:{label:t.baseCaseJson.ajmc}},[t._v("\n                                "+t._s(t.caseForm.ajmc)+"\n                            ")]),t._v(" "),e("el-form-item",{attrs:{label:t.baseCaseJson.gaxlh}},[t._v("\n                                "+t._s(t.caseForm.gaxlh)+"\n                            ")]),t._v(" "),e("el-form-item",{attrs:{label:t.baseCaseJson.pcid}},[t._v("\n                                "+t._s(t.caseForm.pcid)+"\n                            ")]),t._v(" "),e("el-form-item",{attrs:{label:t.baseCaseJson.ajyj}},[t._v("\n                                "+t._s(t.caseForm.ajyj)+"\n                            ")])],1),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("卡号信息")]),t._v(" "),t._l(t.caseForm.khxx,function(s,a){return[t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("催收员信息")]),t._v(" "),t._l(t.caseForm.csyxx,function(s,a){return[t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("贷款信息")]),t._v(" "),t._l(t.caseForm.dkxx,function(s,a){return[t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("对象信息")]),t._v(" "),t._l(t.caseForm.dxxx,function(s,a){return[t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+t._s(s)+t._s(s)+t._s(s)+t._s(s)+t._s(s)+t._s(s)+t._s(s)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("外访信息")]),t._v(" "),t._l(t.caseForm.wfxx,function(s,a){return[t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&"null"!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("案人信息")]),t._v(" "),t._l(t.caseForm.arxx,function(s,a){return[t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("联系人信息")]),t._v(" "),t._l(t.caseForm.lxrxx,function(s,a){return[e("div",{staticClass:"line"}),t._v(" "),t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("其他信息")]),t._v(" "),t._l(t.caseForm.qtxx,function(s,a){return[t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+"\n                                    ")]):t._e()]})]})],2),t._v(" "),e("div",{staticClass:"case-item clearfix"},[e("div",{staticClass:"case-title"},[t._v("备注信息")]),t._v(" "),t._l(t.caseForm.bzxx,function(s,a){return[e("div",{staticClass:"line"}),t._v(" "),t._l(s,function(s,a,i){return["id"!=a&&"ajid"!=a&&"xszt"!=a&&null!=s?e("el-form-item",{attrs:{label:t.baseCaseJson[a]}},[t._v("\n                                        "+t._s(s)+"\n                                    ")]):t._e()]})]})],2)])],1)]),t._v(" "),e("el-tab-pane",{attrs:{label:"案件任务信息("+t.total+")"}},[e("div",[e("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){t.taskModelVisible=!0,t.taskForm={}}}},[t._v("添加任务")])],1),t._v(" "),e("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData}},[e("el-table-column",{attrs:{prop:"rwmc",label:"任务名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"rwzt",label:"任务状态",formatter:t.rwztFormatter}}),t._v(" "),e("el-table-column",{attrs:{prop:"rwfs",label:"任务方式",formatter:t.rwfsFormatter}}),t._v(" "),e("el-table-column",{attrs:{prop:"rwzxrmc",label:"任务执行人"}}),t._v(" "),e("el-table-column",{attrs:{prop:"rwyj",label:"任务佣金"}}),t._v(" "),e("el-table-column",{attrs:{prop:"sjyj",label:"实际佣金"}}),t._v(" "),e("el-table-column",{attrs:{prop:"rwjzsj",label:"任务截止时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"rwwcsj",label:"任务完成时间"}}),t._v(" "),e("el-table-column",{attrs:{prop:"rwms",label:"任务描述"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleTask(s.$index,s.row)}}},[t._v("\n                                任务指派\n                            ")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleTaskRecord(s.$index,s.row)}}},[t._v("\n                                反馈记录\n                            ")])]}}])})],1),t._v(" "),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.currentPage,background:"","page-sizes":[15,20,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(s){t.currentPage=s},"update:current-page":function(s){t.currentPage=s},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1),t._v(" "),e("el-dialog",{attrs:{title:t.taskTitle,visible:t.recordModelVisible,width:"50%"},on:{"update:visible":function(s){t.recordModelVisible=s}}},[e("div",[e("el-steps",{attrs:{active:1}},[e("el-step",{attrs:{title:"记录1",description:"任务记录详细信息"}}),t._v(" "),e("el-step",{attrs:{title:"记录2",description:"任务记录详细信息"}}),t._v(" "),e("el-step",{attrs:{title:"记录3",description:"任务记录详细信息"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.recordModelVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),e("el-dialog",{staticClass:"assign-task",attrs:{title:"指派任务",visible:t.assignedModelVisible,width:"30%"},on:{"update:visible":function(s){t.assignedModelVisible=s}}},[e("el-form",{attrs:{"label-width":"120px"}},[e("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"任务接收人员"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.taskPersonId,callback:function(s){t.taskPersonId=s},expression:"taskPersonId"}},t._l(t.ywyArr,function(t){return e("el-option",{key:t.id,attrs:{label:t.mz,value:t.id}})}),1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.assignedModelVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.assignTask}},[t._v("指 派")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"任务信息",visible:t.taskModelVisible,width:"60%"},on:{"update:visible":function(s){t.taskModelVisible=s}}},[e("el-form",{ref:"taskForm",staticClass:"task-form clearfix",attrs:{model:t.taskForm,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"任务名称",prop:"rwmc",rules:[{required:!0,message:"任务名称不能为空",trigger:"blur"}]}},[e("el-input",{model:{value:t.taskForm.rwmc,callback:function(s){t.$set(t.taskForm,"rwmc",s)},expression:"taskForm.rwmc"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"任务佣金",prop:"rwyj"}},[e("el-input",{model:{value:t.taskForm.rwyj,callback:function(s){t.$set(t.taskForm,"rwyj",s)},expression:"taskForm.rwyj"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"任务方式"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.taskForm.rwfs,callback:function(s){t.$set(t.taskForm,"rwfs",s)},expression:"taskForm.rwfs"}},t._l(t.rwfsArr,function(t){return e("el-option",{key:t.ctdm,attrs:{label:t.ctmc,value:t.ctdm}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:"任务状态"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.taskForm.rwzt,callback:function(s){t.$set(t.taskForm,"rwzt",s)},expression:"taskForm.rwzt"}},t._l(t.rwztArr,function(t){return e("el-option",{key:t.ctdm,attrs:{label:t.ctmc,value:t.ctdm}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:"截止时间",prop:"rwjzsj"}},[e("el-date-picker",{attrs:{type:"datetime"},model:{value:t.taskForm.rwjzsj,callback:function(s){t.$set(t.taskForm,"rwjzsj",s)},expression:"taskForm.rwjzsj"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"完成时间",prop:"rwjzsj"}},[e("el-input",{attrs:{readonly:""},model:{value:t.taskForm.rwwcsj,callback:function(s){t.$set(t.taskForm,"rwwcsj",s)},expression:"taskForm.rwwcsj"}})],1),t._v(" "),e("el-form-item",{staticClass:"el-form-item-1",attrs:{label:"任务描述"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.taskForm.rwms,callback:function(s){t.$set(t.taskForm,"rwms",s)},expression:"taskForm.rwms"}})],1),t._v(" "),e("div",{staticClass:"clearfix"},[e("el-form-item",{attrs:{label:"立即指派"}},[e("el-switch",{model:{value:t.taskForm.isAssign,callback:function(s){t.$set(t.taskForm,"isAssign",s)},expression:"taskForm.isAssign"}})],1),t._v(" "),t.taskForm.isAssign?[e("el-form-item",{attrs:{label:"任务接收人"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.taskForm.rwzxr,callback:function(s){t.$set(t.taskForm,"rwzxr",s)},expression:"taskForm.rwzxr"}},t._l(t.ywyArr,function(t){return e("el-option",{key:t.id,attrs:{label:t.mz,value:t.id}})}),1)],1)]:t._e()],2),t._v(" "),e("el-form-item",{staticClass:"el-form-item-1",attrs:{label:"审核备注"}},[e("el-input",{attrs:{type:"textarea",readonly:""},model:{value:t.taskForm.shbz,callback:function(s){t.$set(t.taskForm,"shbz",s)},expression:"taskForm.shbz"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(s){t.taskModelVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.saveTask}},[t._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var o=e("C7Lr")(l,r,!1,function(t){e("IPQN")},"data-v-7f073a60",null);s.default=o.exports}});